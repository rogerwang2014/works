<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			#canvas{
				background: #000;
			}
		</style>
	</head>
	<body>
		<canvas id="canvas" width="640" height="1030"></canvas>
	</body>
	<script type="text/javascript">
	var canvas=document.getElementById("canvas");
var context=canvas.getContext("2d");
//[0,133,0,0]x轴坐标y轴坐标x方向速度y方向速度
var arr=[[0,0,133,2.36,0.86],[1,236,219,0,10.6],[2,236,879,5.04,0],[3,340,879,0,5.51],[4,340,1030,0,0]];
var srr=[[0,616,823,2.13,1],[1,403,723,0,5.56],[2,403,107,0,0]];
var hrr=[[0,616,823,1.3,0],[1,403,823,0,1],[2,403,773,0,0]]
function draw(obj,xy,ob){
	this.obj=obj;
	this.speedx=0;
	this.speedy=0;
	this.xy=xy;
	this.num=0;
	this.ob=ob;
	this.draw=function(){
		context.beginPath();
		context.moveTo(this.obj[this.num][1],this.obj[this.num][2]);
		context.lineTo(this.endx,this.endy);
		context.closePath();
		context.strokeStyle="red";
		context.stroke();		
	};
	this.move=function(){
		if(this.ob<0){
			if(this.endx<=this.obj[this.num+1][1]&&this.endy<=this.obj[this.num+1][2]){
				this.num++;
				this.speedx=0;
				this.speedy=0;
				context.beginPath();
				context.arc(this.endx,this.endy,15,0,Math.PI*2,true);
				context.closePath();
				context.fillStyle="#FF0000";
				context.fill();
				if(this.num>=this.xy){
					be=true;
				}
			}
		}else if(this.ob>0){
			if(this.endx>=this.obj[this.num+1][1]&&this.endy>=this.obj[this.num+1][2]){
				this.num++;
				this.speedx=0;
				this.speedy=0;
					context.beginPath();
				context.arc(this.endx,this.endy,15,0,Math.PI*2,true);
				context.closePath();
				context.fillStyle="#FF0000";
				context.fill();
				if(this.num>=this.xy){
					be=true;
				}
			}
		}
				this.speedx+=this.obj[this.num][3]*this.ob;
				this.speedy+=this.obj[this.num][4]*this.ob;
				this.endx=this.speedx+this.obj[this.num][1];
				this.endy=this.speedy+this.obj[this.num][2];
	}	
}
var one=new draw(srr,2,-1)
var news=new draw(arr,4,1);
var newss=new draw(hrr,2,-1);
var be=false;
function ani(){
	if(be){return};
	one.move();
	one.draw();
	news.move();
	news.draw();
	newss.move();
	newss.draw();
	
	window.requestAnimationFrame(ani);
}
ani()
//	function draw(x,y){
//		console.log("aaa")
//	this.x=x;
//	this.y=y;
//	this.speedx=0;
//	this.speedy=0;
//
//	this.draw=function(){
//		context.beginPath();
//		context.moveTo(this.x,this.y);
//		context.lineTo(this.endx,this.endy);
//		context.closePath();
//		context.strokeStyle="#fff";
//		context.stroke();
//	};
//	this.move=function(){
//			
//		if(this.speedx<236){
//			this.speedx+=2.36;
//			this.speedy+=2.19;
//		}
//		if(this.speedx>236&&this.speedy<879){
//				this.x=this.endx;
//				this.y=this.endy;
//				this.speedy+=6.6;
//	
//		}
//		if(this.speedy>879&&this.speedx<340){
//			this.x=this.endx;
//			this.y=this.endy;
//			this.speedx+=1.06;
//		}
//		if(this.speedx>340){
//			this.x=this.endx;
//				this.y=this.endy;
//				this.speedy+=6.6;
//		}
//		if(this.speedy>1030){
//				be=true;
//		}
//		console.log(this.speedy)
//		console.log(this.speedx)
//		
//		this.endx=this.speedx;
//		this.endy=this.speedy;
//
//	}
//}
//		var news=new draw(0,0);
//		var be=false;
//		function ani(){
//			if(be){return};
////			context.clearRect(0,0,640,1030);
//			news.move();
//			news.draw();
//			window.requestAnimationFrame(ani);
//		}
//		ani()
	</script>
</html>
